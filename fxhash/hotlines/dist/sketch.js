let i,canvasDraw,x,y,x1,y1,bg,bgProb,randShapeProb,thicknessProb,gridDir,noiseCount,seed,repeatNum,hotlineColor,gridLineColor,bgLineColor,rareStroke,optionNum,gridType,isGold,gridSegments=[3,4,5,10,20,50],segmentCounts=[1,3,5,8,10],lineWeights=[.5,1,1.5,3,5,10,20],rectSizes=[50,100,200,250,300,400,500],alphaOptions=[50,100,200],thicknessDir=[315,225,135,45,0],offsetDist=[5,25,50,100],lineThicknesses=[10,25,50,100,500],formatWidth=[1080,720,1080],formatHeight=[720,1080,1080],sizeMin=100,sizeMax=500,n=fxrand(),shapeCount=1+Math.floor(10*n),gridProb=Math.floor(4*n),shapeProb=Math.floor(2*n);function setup(){canvasFormat(n),createCanvas(formatWidth,formatHeight),colorMode(HSB,360,100,100,100),rectMode(CENTER),strokeCapStyle(n),getHotlineStyleFeature(n),canvasDraw=createGraphics(formatWidth,formatHeight),x1=random(formatWidth),y1=random(formatHeight),noiseCount=random(25e3,5e4),rareStrokeColor=color(45,60,80,100)}function draw(){setBackgroundColor(n),background(bg),setBackgroundLineColor(n),getBackgroundFeature(n),canvasDraw.stroke(bgLineColor),canvasDraw.strokeWeight(random(.05,.75)),lineTexture(random(10,1e4)),mLayer=createGraphics(formatWidth,formatHeight),mLayer.translate(0,0);let e=shapeSet();if(getShapeTypeFeature(shapeProb),0==e)for(i=0;i<shapeCount;i++){rectSizeIndex();let e=rs;rectSizeIndex();let t=rs;mLayer.rect(random(formatWidth),random(formatHeight),e,t)}else for(i=0;i<shapeCount;i++)mLayer.ellipse(random(formatWidth),random(formatHeight),random(sizeMin,sizeMax));drawClone=canvasDraw.get(),drawClone.mask(mLayer.get()),image(drawClone,0,0),gridType=gridSet(gridProb),gridSegmentIndex(n),setGridLineColor(n),getGridLineColor(n),0==gridType?gridX(gridLineColor):1==gridType?gridY(gridLineColor):2==gridType?gridXY(gridLineColor):gridNull(),getGridTypeFeature(gridProb),shapeGradient(n),rareShapeDrop(n),getRareShapeFeature(n),segmentIndex(n),getSegmentCountFeature(n),strokeIndex(n),getStrokeFeature(n),stroke(0),hotLines(n),getDirectionFeature(n),getHotlineThicknessFeature(n),noisey(noiseCount,5*fxrand()),noiseStyle(n),getFrameFeature(n),noLoop()}function canvasFormat(e){e>.667?(formatWidth=formatWidth[0],formatHeight=formatHeight[0]):e>=.334&&e<.667?(formatWidth=formatWidth[1],formatHeight=formatHeight[1]):(formatWidth=formatWidth[2],formatHeight=formatHeight[2])}function lineTexture(e){let t=e;for(i=0;i<t;i++)x2=random(formatWidth),y2=random(formatHeight),canvasDraw.line(x1,y1,x2,y2),x1=x2,y1=y2}function hotLines(e){strokeWeight(lineWeight);let t=e,o=fxrand();0==optionNum&&t>=.5?o>=.98&&blendMode(EXCLUSION):1==optionNum&&t>=.5&&o>=.5&&blendMode(HARD_LIGHT),setHotLineColor(e),thicknessDirection(e),offsetDistance(e),lineThickness(e);let n=od;for(i=0;i<segmentCount;i++){x2=fxrand()*formatWidth,y2=fxrand()*formatHeight;let e=new Lines(x1,y1,x2,y2);if(x1=x2,y1=y2,e.connect(),315==td)for(j=0;j<lt;j++)new Lines(e.x1+n+j,e.y1+n+j,e.x2+n+j,e.y2+n+j).connect();else if(225==td)for(j=0;j<lt;j++)new Lines(e.x1-n-j,e.y1+n+j,e.x2-n-j,e.y2+n+j).connect();else if(135==td)for(j=0;j<lt;j++)new Lines(e.x1-n-j,e.y1-n-j,e.x2-n-j,e.y2-n-j).connect();else if(135==td)for(j=0;j<lt;j++)new Lines(e.x1+n+j,e.y1-n-j,e.x2+n+j,e.y2-n-j).connect();else for(j=0;j<lt;j++)new Lines(e.x1+n+j,e.y1+n+j,e.x2-n-j,e.y2-n-j).connect()}}function gridX(e){for(i=1;i<=gs;i++){let t=i*formatWidth/gs;stroke(e),strokeWeight(.25),line(t,0,t,formatHeight)}}function gridY(e){for(i=1;i<=gs;i++){let t=i*formatHeight/gs;stroke(e),strokeWeight(.25),line(0,t,formatWidth,t)}}function gridXY(e){for(i=1;i<=gs;i++)for(i=1;i<=gs;i++){stroke(e);let t=i*formatWidth/gs;strokeWeight(.25),line(t,0,t,formatHeight);let o=i*formatHeight/gs;strokeWeight(.25),line(0,o,formatWidth,o)}}function gridNull(){for(i=1;i<=gs;i++){let e=i*formatWidth/gs;stroke(bg),strokeWeight(.25),line(e,0,e,formatHeight)}}function rareShapeDrop(e){let t=placeRandShape(e);0==t?(noStroke(),ellipse(fxrand()*width,fxrand()*height,random(100,500))):1==t&&(noStroke(),rect(fxrand()*width,fxrand()*height,random(100,500),random(100,500)))}function setHotLineColor(e){let t,o,n,i,r,a,s,l,g=alphaValue(e);t=color(250,50,100,g),o=color(200,50,100,g),n=color(150,50,100,g),i=color(100,50,100,g),r=color(50,50,100,g),a=color(25,50,100,g),s=color(0,0,80,10),l=color(0,0,10,70);let d=[t,o,n,i,r,a,s,l],h=floor(fxrand()*d.length),c=floor(fxrand()*d.length);t=0==h?d[0]:1==h?d[1]:2==h?d[2]:3==h?d[3]:4==h?d[4]:5==h?d[5]:6==h?d[6]:d[7],t=0==c?d[0]:1==c?d[1]:2==c?d[2]:3==c?d[3]:4==c?d[4]:5==c?d[5]:6==c?d[6]:d[7];let f=drawingContext.createLinearGradient(0,0,formatWidth,formatHeight);f.addColorStop(0,t),f.addColorStop(1,o),drawingContext.strokeStyle=f}function shapeGradient(e){let t,o,n,i,r,a,s,l;t=color(250,50,100,100),o=color(200,50,100,100),n=color(150,50,100,100),i=color(100,50,100,100),r=color(50,50,100,100),a=color(25,50,100,100),s=color(0,0,80,10),l=color(0,0,10,70);let g=[t,o,n,i,r,a,s,l],d=floor(fxrand()*g.length),h=floor(fxrand()*g.length);t=0==d?g[0]:1==d?g[1]:2==d?g[2]:3==d?g[3]:4==d?g[4]:5==d?g[5]:6==d?g[6]:g[7],t=0==h?g[0]:1==h?g[1]:2==h?g[2]:3==h?g[3]:4==h?g[4]:5==h?g[5]:6==h?g[6]:g[7];let c=drawingContext.createLinearGradient(0,0,formatWidth,formatHeight);c.addColorStop(0,t),c.addColorStop(1,o),drawingContext.fillStyle=c}function noisey(e,t){for(let o=1;o<=e;o++){strokeWeight(t),2==optionNum?stroke(10,10*fxrand()):stroke(255,10*fxrand());let e=fxrand()*width,o=fxrand()*height;point(e,o)}noLoop()}function strokeCapStyle(e){e>=.9?strokeCap(PROJECT):strokeCap(ROUND)}function getHotlineStyleFeature(e){return e>=.9?"Square":"Round"}function noiseStyle(e){e>=.75&&(blendMode(SOFT_LIGHT),ellipse(random(width),random(height),random(100,width))),e>=.9&&(blendMode(DIFFERENCE),ellipse(random(width),random(height),random(50,200))),e>=.98&&(rectMode(CENTER),blendMode(EXCLUSION),rect(width/2,height/2,width-200,height-200))}function getFrameFeature(e){return e>=.98}function setBackgroundColor(e){return e>=.9?(bg=color(50,10,100,100),optionNum=0):e<.9&&e>=.45?(bg=color(0),optionNum=1):(bg=color(0,2,100,50),optionNum=2)}function getBackgroundFeature(e){return e>=.9?"Gold":e<.9&&e>=.45?"Black":"White"}function setBackgroundLineColor(e){0==optionNum&&e>=.5?bgLineColor=color(255):0==optionNum&&e>=0&&e<.5?bgLineColor=color(0):1==optionNum&&e>=.8?bgLineColor=rareStrokeColor:1==optionNum&&e>=0&&e<.8?bgLineColor=color(255):2==optionNum&&e>=.8?bgLineColor=rareStrokeColor:2==optionNum&&e>=0&&e<.8&&(bgLineColor=color(0))}function setGridLineColor(e){let t=.85;gridLineColor=0==optionNum&&e>=t?rareStrokeColor:0==optionNum&&e>=.425&&e<t?color(255):0==optionNum&&e>=0&&e<.425?color(0):1==optionNum&&e>=t?rareStrokeColor:1==optionNum&&e>=0&&e<t?color(255):2==optionNum&&e>=t?rareStrokeColor:color(0)}function getGridLineColor(e){let t=.85;return 0==optionNum&&e>=.85?"Gold":0==optionNum&&e>=.425&&e<t?"White":0==optionNum&&e>=0&&e<.425?"Black":1==optionNum&&e>=t?"Gold":1==optionNum&&e>=0&&e<t?"White":2==optionNum&&e>=t?"Gold":"Black"}function shapeSet(){return 1==shapeProb?1:0}function getShapeTypeFeature(e){return 1==e?"Circle":"Rectangle"}function placeRandShape(e){return e>.8?0:e>=.5&&e<.8?1:e<.5?2:void 0}function getRareShapeFeature(e){return e>.8?"Circle":e>=.5&&e<.8?"Rectangle":e<.5?"None":void 0}function gridSet(e){return 0==e?0:1==e?1:2==e?2:3}function getGridTypeFeature(e){return 0==e?"X":1==e?"Y":2==e?"XY":"Inverted"}function rectSizeIndex(){let e=random(1);rs=e>.95?rectSizes[6]:e>=.75&&e<.95?rectSizes[5]:e>=.55&&e<.75?rectSizes[4]:e>=.35&&e<.55?rectSizes[3]:e>=.15&&e<.35?rectSizes[2]:e>=.05&&e<.15?rectSizes[1]:rectSizes[0]}function segmentIndex(e){segmentCount=e>.95?segmentCounts[4]:e>=.85&&e<.95?segmentCounts[3]:e>=.6&&e<.75?segmentCounts[2]:e>=.2&&e<.6?segmentCounts[1]:segmentCounts[0]}function getSegmentCountFeature(e){return e>.95?(feature=segmentCounts[4],feature):e>=.85&&e<.95?(feature=segmentCounts[3],feature):e>=.6&&e<.75?(feature=segmentCounts[2],feature):e>=.2&&e<.6?(feature=segmentCounts[1],feature):(feature=segmentCounts[0],feature)}function strokeIndex(e){lineWeight=e>.95?lineWeights[0]:e>=.85&&e<.95?lineWeights[1]:e>=.65&&e<.85?lineWeights[2]:e>=.45&&e<.65?lineWeights[3]:e>=.35&&e<.45?lineWeights[4]:e>=.15&&e<.35?lineWeights[5]:lineWeights[6]}function getStrokeFeature(e){return e>.95?(lineWeight=lineWeights[0],lineWeight):e>=.85&&e<.95?(lineWeight=lineWeights[1],lineWeight):e>=.65&&e<.85?(lineWeight=lineWeights[2],lineWeight):e>=.45&&e<.65?(lineWeight=lineWeights[3],lineWeight):e>=.35&&e<.45?(lineWeight=lineWeights[4],lineWeight):e>=.15&&e<.35?(lineWeight=lineWeights[5],lineWeight):(lineWeight=lineWeights[6],lineWeight)}function gridSegmentIndex(e){gs=e>.95?gridSegments[5]:e>=.75&&e<.95?gridSegments[4]:e>=.55&&e<.75?gridSegments[3]:e>=.35&&e<.55?gridSegments[2]:e>=.15&&e<.35?gridSegments[1]:gridSegments[0]}function alphaValue(e){return e>.75?(av=alphaOptions[2],av):e>=.45&&e<.75?(av=alphaOptions[1],av):(av=alphaOptions[0],av)}function thicknessDirection(e){td=e>=.75?thicknessDir[0]:e>=.5&&e<.75?thicknessDir[1]:e>=.25&&e<.5||e>=.07&&e<.25?thicknessDir[2]:thicknessDir[4]}function getDirectionFeature(e){return e>=.75?0:e>=.5&&e<.75?1:e>=.25&&e<.5?2:e>=.07&&e<.25?3:4}function offsetDistance(e){od=e>.75?offsetDist[0]:e>=.5&&e<.75?offsetDist[1]:e>=.25&&e<.5?offsetDist[2]:offsetDist[3],print("DEBUG: Offset distance is "+od)}function lineThickness(e){lt=e>.95?lineThicknesses[4]:e>=.7&&e<.95?lineThicknesses[3]:e>=.4&&e<.7?lineThicknesses[2]:e>=.15&&e<.4?lineThicknesses[1]:lineThicknesses[0]}function getHotlineThicknessFeature(e){return e>.95?lineThicknesses[4]:e>=.7&&e<.95?lineThicknesses[3]:e>=.4&&e<.7?lineThicknesses[2]:e>=.15&&e<.4?lineThicknesses[1]:lineThicknesses[0]}class Lines{constructor(e,t,o,n){this.x1=e,this.y1=t,this.x2=o,this.y2=n}connect(){line(this.x1,this.y1,this.x2,this.y2)}}function keyPressed(){"s"===key&&save("Hotlines.jpg")}